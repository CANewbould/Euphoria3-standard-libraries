--------------------------------------------------------------------------------
--	Application: error.ex
--------------------------------------------------------------------------------
-- Notes:
--
-- 
--------------------------------------------------------------------------------
--/*
--= Program: (euphoria)(demos)(std)error.ex
-- Description: test program for Eu3's error routines
------
--[[[Version: 3.2.1.0
--Euphoria Versions: 3.1.1 upwards 
--Author: C A Newbould
--Date: 2019.03.19
--Status: operational
--Changes:]]]
--* created
--
--==Testing error routines
--
------
--*/
--------------------------------------------------------------------------------
--/*
--==Interface
--*/
--------------------------------------------------------------------------------
--/*
--=== Includes
--*/
--------------------------------------------------------------------------------
include std/error.e
--------------------------------------------------------------------------------
--
--=== Constants
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--constant CLOSURE = "\n*** Press ENTER to close screen ***"
constant LIB = "Error routines"
constant EOL = '\n'
constant KEYBOARD = 0
constant SCREEN = 1
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Euphoria types
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Variables
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Routines
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
-- Main
--------------------------------------------------------------------------------
--/*
--==== Running
--*/
--------------------------------------------------------------------------------
procedure main(integer test)
    atom fred
	puts(SCREEN, repeat('-', length(LIB) + 16) & EOL)
    puts(SCREEN, "*** Testing " & LIB & " ***" & EOL)
    crash_message("Crash message")
    warning_file("fred.err")
    warning("No1")
    warning("No2")
    warning_file(0)
    warning("No3")
    if test then
	--either/or
	    puts(SCREEN, "\nType error - calls crash_message\nENTER to call")
	    if getc(KEYBOARD) then end if
		fred = "bill"	-- type error for crash_message
	else
	    puts(SCREEN, "\nCalling crash routine\n")
		crash("\nTesting crash routine %d", 1)
	end if
end procedure
--------------------------------------------------------------------------------
-- Main
--------------------------------------------------------------------------------
main(1)
--------------------------------------------------------------------------------
-- Previous versions
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
