--------------------------------------------------------------------------------
--	Application: machine.ex
--------------------------------------------------------------------------------
-- Notes:
--
-- 
--------------------------------------------------------------------------------
--/*
--= Program: (test)(eu3)machine.ex
-- Description: test program for Eu3's machine routines
------
--[[[Version: 3.2.1.0
--Euphoria Versions: 3.1.1 upwards 
--Author: C A Newbould
--Date: 2017.08.12
--Status: operational
--Changes:]]]
--* added test for ##allocate_string##
--* added test for ##peek_string##
--
--==Testing machine routines
--
--
------
--*/
--------------------------------------------------------------------------------
-- Previous versions
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--/*
--==Interface
--*/
--------------------------------------------------------------------------------
--/*
--=== Includes
--*/
--------------------------------------------------------------------------------
include std/machine.e   -- for allocate_string, peek_string
--------------------------------------------------------------------------------
--/*
--=== Constants
--*/
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
constant CLOSURE = "\n*** Press ENTER to close screen ***"
constant LIB = "Machine routines"
constant EOL = '\n'
constant SCREEN = 1
constant fred = allocate_string("This is a test")
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Euphoria types
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Variables
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Routines
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
-- Main
--------------------------------------------------------------------------------
--/*
--==== Running
--*/
--------------------------------------------------------------------------------
procedure main()
    puts(SCREEN, repeat('-', length(LIB) + 16) & EOL)
    puts(SCREEN, "*** Testing " & LIB & " ***" & EOL)
    puts(SCREEN, repeat('-', length(LIB) + 16) & EOL)
    puts(SCREEN, "--- Testing allocate_string ---" & EOL)
    puts(SCREEN, "allocated a string \"This is a test\"" & EOL)
    puts(SCREEN, "peek_string(fred) -> ")
    puts(1, peek_string(fred))    
    puts(SCREEN, EOL & repeat('-', length(CLOSURE)))
    puts(SCREEN, CLOSURE)
    if getc(0) then end if
end procedure
--------------------------------------------------------------------------------
-- Main
--------------------------------------------------------------------------------
main()
--------------------------------------------------------------------------------
­1.0
