--------------------------------------------------------------------------------
--	Application: database.ex
--------------------------------------------------------------------------------
-- Notes:
--
-- 
--------------------------------------------------------------------------------
--/*
--= Program: (euphoria)(demos)(std)database.ex
-- Description: test program for the standard library eds.e
------
--[[[Version: 3.1.1.1
--Euphoria Versions: 3.1.1 upwards 
--Author: C A Newbould
--Date: 2021.01.25
--Status: incomplete
--Changes:]]]
--* corrected runtime error
--
--==Test bed for the Standard EDS library
--
------
--*/
--------------------------------------------------------------------------------
--/*
--==Interface
--*/
--------------------------------------------------------------------------------
--/*
--=== Includes
--*/
--------------------------------------------------------------------------------
include std/eds.e
include include/utils.e -- for heading, section, closing & EOL
--------------------------------------------------------------------------------
--
--=== Constants
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
constant dbFileName = "fred"
constant LIB = "(include)(std)eds.e"
constant SCREEN = 1
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Euphoria types
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Variables
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
--
--=== Routines
--
--------------------------------------------------------------------------------
--	Local
--------------------------------------------------------------------------------
procedure println(sequence test)
    puts(SCREEN, test & '\n')
end procedure
--------------------------------------------------------------------------------
--	Shared with other modules
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
-- Main
--------------------------------------------------------------------------------
--/*
--==== Running
--*/
--------------------------------------------------------------------------------
heading(LIB)
section("Try to create a database")
integer test
test = db_create(dbFileName, DB_LOCK_NO)
if test = DB_OK then
	println(dbFileName & " created")
elsif test = DB_EXISTS_ALREADY then
	println(dbFileName & " already exists")
else
	println(dbFileName & " NOT created")
end if
test = db_open(dbFileName, DB_LOCK_NO)
if test = DB_OK then
	println(dbFileName & " now open")
else
	println(dbFileName & " NOT open")
end if
test = db_select(dbFileName)
if test = DB_OK then
	println(dbFileName & " now selected")
else
	println(dbFileName & " NOT selected")
end if
db_close()
println("The current database is now closed")
closing(DEFAULT_MESSAGE)
--------------------------------------------------------------------------------
-- Previous versions
--------------------------------------------------------------------------------
--[[[Version: 3.1.1.0
--Euphoria Versions: 3.1.1 upwards 
--Author: C A Newbould
--Date: 2019.02.21
--Status: incomplete
--Changes:]]]
--* created with EDB creation
--------------------------------------------------------------------------------
